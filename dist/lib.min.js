window.PostWind=(()=>{let O={},B={},g={},Q=document.createElement("style");Q.id="postwind-main",document.head.appendChild(Q);let M=document.createElement("style");M.id="postwind-shortcuts",document.head.appendChild(M);let h=new IntersectionObserver((W)=>{for(let U of W)U.target.classList.toggle("pw-visible",U.isIntersecting)},{threshold:0.5}),j=new WeakSet;function d(W){let U="."+CSS.escape(W);for(let D of document.styleSheets)try{for(let z of D.cssRules){if(!z.cssRules)continue;for(let G of z.cssRules)if(G.selectorText===U){let J=G.cssText.match(/\{\s*([^}]+)\s*\}/);return J?J[1].trim():null}}}catch(z){}return null}function C(W){let U="."+CSS.escape(W);for(let D of document.styleSheets)try{for(let z of D.cssRules){if(!z.cssRules)continue;for(let G of z.cssRules)if(G.selectorText===U)return G.cssText}}catch(z){}return null}function Z(W){let U=document.createElement("div");return U.className=W,document.body.appendChild(U),new Promise((D)=>{requestAnimationFrame(()=>{D(d(W)),U.remove()})})}function V(W,U){O[W]=U}function u(W){let U=W.indexOf("{"),D=W.lastIndexOf("}");if(U===-1||D===-1)return null;return W.substring(U+1,D).trim()}function k(W,U){B[W]=U}function p(W){let U=B[W];if(!U)return Promise.resolve(null);let D=U.split(/\s+/),z=[];for(let J of D)if(B[J])z.push(...B[J].split(/\s+/));else z.push(J);let G=document.createElement("div");return G.className=z.join(" "),document.body.appendChild(G),new Promise((J)=>{requestAnimationFrame(()=>{let A=[];for(let H of z){let L=C(H);if(L)A.push(u(L))}if(G.remove(),!A.length)return J(null);J(`.${CSS.escape(W)} { ${A.join(" ")} }`)})})}let F=/^(.+-)(\d+(?:\.\d+)?)(px|rem|em|vh|vw|vmin|vmax|%|ch|ex|cap|lh|dvh|dvw|svh|svw|cqw|cqh)$/;function x(W){let U=W.indexOf(":");if(U===-1)return!1;let D=W.substring(0,U);return D.includes("-")&&!D.startsWith("visible")}function w(W,U){let D=U[0],z=D.lastIndexOf("-"),G=z!==-1?D.substring(0,z+1):"",J=CSS.escape(W);function A(H){let L=G+H,K=L.match(F);return K?`${K[1]}[${K[2]}${K[3]}]`:L}if(U.length===2){let H=A(U[1]),L=(()=>{let K=D.match(F);return K?`${K[1]}[${K[2]}${K[3]}]`:D})();return Promise.all([Z(L),Z(H)]).then(([K,$])=>{let P=[];if(K)P.push(`.${J} { ${K} }`);if($)P.push(`${O.t} { .${J} { ${$} } }`);return P.length?P.join(`
`):null})}if(U.length===3){let H=A(U[1]),L=A(U[2]),K=(()=>{let $=D.match(F);return $?`${$[1]}[${$[2]}${$[3]}]`:D})();return Promise.all([Z(K),Z(H),Z(L)]).then(([$,P,b])=>{let I=[];if($)I.push(`.${J} { ${$} }`);if(P)I.push(`${O.t} { .${J} { ${P} } }`);if(b)I.push(`${O.d} { .${J} { ${b} } }`);return I.length?I.join(`
`):null})}return Promise.resolve(null)}function E(W){if(W.includes("@")){let A=W.match(/^([^@]+)@([a-z]+)$/);if(A){let H=A[2]+":"+A[1];return E(H).then((L)=>{if(!L)return null;return L.replace(CSS.escape(H),CSS.escape(W))})}}if(B[W])return p(W);if(W.includes("|"))return w(W,W.split("|"));if(x(W))return w(W,W.split(":"));let U=W.match(F);if(U){let A=`${U[1]}[${U[2]}${U[3]}]`;return Z(A).then((H)=>{if(!H)return null;return`.${CSS.escape(W)} { ${H} }`})}if(W.startsWith("dark:")){let A=W.substring(5);return Z(A).then((H)=>{if(!H)return null;return`body.dark .${CSS.escape(W)} { ${H} }`})}if(W.startsWith("visible:")){let A=W.substring(8);return Z(A).then((H)=>{if(!H)return null;return`.pw-visible.${CSS.escape(W)} { ${H} }`})}let D=W.indexOf(":");if(D===-1)return Z(W).then((A)=>A?`.${CSS.escape(W)} { ${A} }`:null);let z=W.substring(0,D),G=W.substring(D+1),J=O[z];if(z==="m")console.warn(`PostWind: "${W}" â€” m: prefix is unnecessary. PostWind is mobile-first, so "${G}" is already the mobile default. Use "${G}" directly and t:/d: for larger screens.`);if(!J)return Z(W).then((A)=>A?`.${CSS.escape(W)} { ${A} }`:null);return Z(G).then((A)=>{if(!A)return null;return`${J} { .${CSS.escape(W)} { ${A} } }`})}function X(W){if(g[W])return g[W];let U=!!B[W],D=E(W).then((z)=>{if(z&&!g[W]._injected){let G=U?M:Q;G.textContent+=z+`
`,g[W]._injected=!0}return z});return D._injected=!1,g[W]=D,D}function _(W){if(j.has(W))return;j.add(W),h.observe(W)}let R=/^(min|max)-(\d+):(.+)$/,f=new WeakMap;function N(W,U,D,z,G){if(!f.has(W))f.set(W,[]),new ResizeObserver((A)=>{for(let H of A){let L=H.contentRect.width;for(let K of f.get(W)||[]){let $=K.mode==="min"?L>=K.width:L<=K.width;W.classList.toggle(K.innerClass,$)}}}).observe(W);f.get(W).push({mode:D,width:z,innerClass:G})}function i(W,U){let D=U.substring(7);setTimeout(()=>W.classList.add(D),100)}function v(W){if(B[W])return!0;if(W.startsWith("dark:"))return!0;if(W.startsWith("visible:"))return!0;if(W.startsWith("onload:"))return!0;if(W.includes("|"))return!0;if(W.includes("@"))return!0;if(x(W))return!0;if(F.test(W))return!0;if(R.test(W))return!0;return!1}function q(W){for(let U of W.classList)if(U.startsWith("onload:"))i(W,U);else if(U.startsWith("visible:"))_(W),X(U);else if(R.test(U)){let D=U.match(R);N(W,U,D[1],parseInt(D[2]),D[3])}else if(B[U])X(U);else if(v(U))X(U)}function o(W){let U=(W||document).querySelectorAll("*");for(let D of U){if(!D.className||typeof D.className!=="string")continue;for(let z of D.classList)if(v(z)){q(D);break}}}function S(){function W(){if(!Y){requestAnimationFrame(W);return}Y.then(()=>o())}W()}if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",S);else S();new MutationObserver((W)=>{if(!Y)return;Y.then(()=>{for(let U of W){if(U.type==="attributes"){if(U.target.nodeType===1)q(U.target);continue}for(let D of U.addedNodes){if(D.nodeType!==1)continue;if(D.className&&typeof D.className==="string")q(D);let z=D.querySelectorAll?.("*");if(z){for(let G of z)if(G.className&&typeof G.className==="string")q(G)}}}})}).observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]});let T=null;function n(){function W(){let U=window.innerWidth,D=U<768?"mobile":U<1024?"tablet":"desktop";if(D!==T){if(T)document.body.classList.remove(T);document.body.classList.add(D),T=D}}W(),window.addEventListener("resize",W)}let Y=null;function m(W){if(W){if(W.breakpoints)for(let[U,D]of Object.entries(W.breakpoints))V(U,D);if(W.shortcuts)for(let[U,D]of Object.entries(W.shortcuts))k(U,D)}if(typeof window<"u"&&window.matchMedia){if(document.body?.classList.contains("dark-auto")){if(window.matchMedia("(prefers-color-scheme: dark)").matches)document.body.classList.add("dark");window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(D)=>{document.body.classList.toggle("dark",D.matches)})}}if(W&&W.body)n();if(Y)return Y;if(!W||!W.tailwind)return Y=Promise.resolve(),Y;if(document.querySelector('script[src*="tailwindcss/browser"]'))return Y=y(),Y;return Y=new Promise((U,D)=>{let z=document.createElement("script");z.src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4",z.onload=()=>y().then(U),z.onerror=()=>D(Error("Failed to load Tailwind")),document.head.appendChild(z)}),Y}function y(){return new Promise((W)=>{function U(){for(let D of document.styleSheets)try{if(D.ownerNode?.hasAttribute?.("data-tailwindcss")){W();return}}catch(z){}for(let D of document.styleSheets)try{for(let z of D.cssRules)if(z.constructor.name==="CSSLayerBlockRule"){W();return}}catch(z){}requestAnimationFrame(U)}U()})}return X.init=m,X.ready=()=>Y||Promise.resolve(),X.breakpoint=V,X.shortcut=k,X.resolve=E,X.twCSS=Z,X.cache=g,X.observeVisible=_,X.processElement=q,V("m","@media (max-width: 767px)"),V("t","@media (min-width: 768px)"),V("d","@media (min-width: 1024px)"),X})();var c=typeof window<"u"?window.PostWind:void 0;export{c as default};
